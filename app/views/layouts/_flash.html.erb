<% flash.each  do |key,fl| %>
  <% heading = fl.is_a?(Hash) ? fl[:heading] || fl['heading'] : key.capitalize %>
  <% message = fl.is_a?(Hash) ? fl[:message] || fl['message'] : fl.capitalize %>
  <% errors = fl.is_a?(Hash) && fl[:errors] || fl['errors'] %>
  <% errors = errors.try(:full_messages) ||  errors %>
  <div class="alert <%= flash_class(key, fl) %>">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    <h5 class="alert-heading"><%= "#{heading.html_safe}" %></h5>
    <% if message %><p><%= message.html_safe %></p><% end %>
    <% if errors && errors.any? %>
      <hr>
      <ul>
        <% errors.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    <% end %>
  </div>
<% end %>