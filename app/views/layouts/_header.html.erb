<nav class="navbar navbar-light navbar-expand-sm bg-light">
  <%= octicon 'book', :height => 36, class: 'pr-2' %>
  <%= link_to 'Blocipedia', root_path, class: 'navbar-brand' %>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
    <span class="navbar-toggler-icon"></span>
  </button>
  
  <!-- Navbar links -->
  <div class="collapse navbar-collapse" id="collapsibleNavbar">
    <ul class="navbar-nav">
      <li class="nav-item"><%= link_to 'Browse', wikis_path, class: "nav-link" %></li>
      <li class="nav-item"><%= link_to 'New Wiki', new_wiki_path, class: "nav-link" %></li>
    </ul>
    <ul class="navbar-nav ml-auto">
      <% if user_signed_in? %>
      <li class="nav-item pr-2">
        <!-- mobile user actions -->
        <h6 class="nav-text d-sm-none"><%= current_user.email %></h6>
        <% if current_user.standard? %>
          <%= link_to 'Upgrade to premium', new_charge_path, class: 'd-sm-none' %>
        <% end %>
        <%= link_to 'Edit profile', edit_user_registration_path, class: 'nav-link d-sm-none' %>
        <div class="dropdown-divider d-sm-none"></div>
        <%= link_to "Sign Out", destroy_user_session_path, method: :delete, class: 'nav-link d-sm-none'  %>
        <!-- desktop user actions -->
        <div class="btn-group dropdown d-none d-sm-block">
          <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <%= octicon 'person', :height => 20 %>
          </button>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
            <h5 class="dropdown-header"><%= user_name(current_user) %></h5>
            <% if current_user.standard? %>
              <%= link_to 'Upgrade to premium', new_charge_path, class: 'dropdown-item' %>
            <% end %>
            <%= link_to 'Edit profile', edit_user_registration_path, class: 'dropdown-item' %>
            <div class="dropdown-divider"></div>
            <%= link_to "Log Out", destroy_user_session_path, method: :delete, class: 'dropdown-item'  %>
          </div>
        </div>
      </li>
      <% else %>
      <li class="nav-item pr-2"><%= link_to "Log In", new_user_session_path, class: 'navbar-link btn btn-default'  %></li>
      <li class="nav-item pr-2"><%= link_to "Sign Up", new_user_registration_path, class: 'navbar-link btn btn-primary'  %></li>
      <% end %>
    </ul>
  </div> 
</nav>